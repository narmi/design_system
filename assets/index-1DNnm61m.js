import{e as t,r as N}from"./iframe-aSqRCNIz.js";import{$ as S,a as $,b as k}from"./Dialog-DeyGrXdH.js";import{a as q,u as L,c as V}from"./dom-D2xacjcJ.js";import{c as D}from"./index-RvS1aOr8.js";import{i as R}from"./selection-CAkQuomx.js";import{R as p}from"./index-D1JVShz3.js";R.icons.map(n=>n.properties.name);const y=n=>t.createElement(t.Fragment,null);y.displayName="MenuButton.Item";try{MenuButton.Item.displayName="MenuButton.Item",MenuButton.Item.__docgenInfo={description:"",displayName:"MenuButton.Item",props:{label:{defaultValue:null,description:"Display label for menu item",name:"label",required:!0,type:{name:"string"}},id:{defaultValue:null,description:"ID for menu item",name:"id",required:!0,type:{name:"string"}},onSelect:{defaultValue:null,description:"Selection handler",name:"onSelect",required:!1,type:{name:"(label: string, id: string) => void"}},startIcon:{defaultValue:null,description:"Optional start icon for menu item",name:"startIcon",required:!1,type:{name:"string"}}}}}catch{}function c(){return c=Object.assign?Object.assign.bind():function(n){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var r in l)({}).hasOwnProperty.call(l,r)&&(n[r]=l[r])}return n},c.apply(null,arguments)}function m({menuItems:n,testId:i,children:l}){const[r,a]=t.useState(!1),[b,s]=t.useState(!0),{handleMouseEvent:h,trigger:x,parentRef:f}=q({enabled:b}),{renderLayer:v,triggerProps:E,layerProps:M}=L({isOpen:r,auto:!0,onOutsideClick:()=>{a(!1),s(!0)},preferX:"right",preferY:"bottom",placement:"bottom-start",trigger:x,container:V});function C(e){e.preventDefault(),a(!0),s(!1)}function _(e){e.preventDefault(),e.key==="F12"&&e.ctrlKey&&(a(!0),s(!1))}const I=e=>{const o=n.find(d=>d.props.id===e);o?.props.onSelect&&o.props.onSelect(o.props.label,o.props.id),a(!1),s(!0)},u=({key:e})=>{e==="Escape"&&r&&(a(!1),s(!0))},g=e=>{f.current?.contains(e.target)||(a(!1),s(!0))};return N.useEffect(()=>(window.addEventListener("keyup",u),window.addEventListener("contextmenu",g),()=>{window.removeEventListener("keyup",u),window.removeEventListener("contextmenu",g)}),[u]),t.createElement(S,{isOpen:!0,onOpenChange:e=>{e&&a(e)},"data-testid":i},t.createElement("div",c({ref:f,role:"button",tabIndex:0,"aria-label":"Press Control + F12 to open the context menu",onContextMenu:C,onKeyDown:_,onMouseMove:h},E),l),r&&v(t.createElement("div",c({className:"nds-context-menu-popover"},M),t.createElement($,{onAction:I,className:"nds-context-menu rounded--all elevation--high"},n.map((e,o)=>t.createElement(k,{key:e.props.id,id:e.props.id,value:e.props.id,className:({isSelected:d,isFocused:w,isDisabled:O})=>D(["nds-context-menu-item","padding--x--s padding--y--xs",{"nds-context-menu-item--highlighted":d||w,"nds-context-menu-item--disabled":O,"rounded--top":o===0,"rounded--bottom":o===n.length-1}])},t.createElement(p,{gapSize:"s"},e.props.startIcon&&t.createElement(p.Item,{shrink:!0},t.createElement("span",{className:`narmi-icon-${e.props.startIcon}`})),t.createElement(p.Item,null,e.props.label))))))))}m.Item=y;try{m.displayName="ContextMenu",m.__docgenInfo={description:`ContextMenu is a wrapper component that provides a custom context menu for the children element.

The menu can be trigger by right-clicking on the element or by pressing Control + F12.`,displayName:"ContextMenu",props:{testId:{defaultValue:null,description:"Optional value for `data-testid` attribute",name:"testId",required:!1,type:{name:"string"}},menuItems:{defaultValue:null,description:"ContextMenu.Item children",name:"menuItems",required:!0,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>[]"}},children:{defaultValue:null,description:"React element for enabling custom context menu",name:"children",required:!0,type:{name:"ReactNode"}}}}}catch{}export{m as C};
