import{e as t,r as W}from"./iframe-DTtOA2my.js";import{c as $}from"./index-RvS1aOr8.js";import{i as se}from"./selection-CAkQuomx.js";import{u as re}from"./downshift.esm-BMf8islT.js";import{P as l}from"./index-BiqqU9tT.js";import{E as le}from"./index-B6AE_n2P.js";import{T as z}from"./index-_2lM_CWq.js";import{R as y}from"./index-CDO5PLff.js";import{g as ie}from"./index-Djv5Y61i.js";import{u as ce}from"./index-BQptaVJm.js";const w=({children:n,value:a})=>t.createElement(t.Fragment,null,n||a);w.displayName="Combobox.Item";w.propTypes={value:l.string.isRequired,searchValue:l.string,children:l.oneOfType([l.node,l.arrayOf(l.node)])};w.__docgenInfo={description:"",methods:[],displayName:"Combobox.Item",props:{value:{description:`String representation of the option.

This value is also used as a typeahead; if a user types "n" while
the Select is open, highlight will move to the first item with a
value starting with \`n\`.`,type:{name:"string"},required:!0},searchValue:{description:"Custom typeahead string. By default, typeahead uses `value`.\nUse this prop to pass in a custom string you'd like the user to search\nagainst when using typeahead.",type:{name:"string"},required:!1},children:{description:"",type:{name:"union",value:[{name:"node"},{name:"arrayOf",value:{name:"node"}}]},required:!1}}};const M=({text:n,kind:a="bold"})=>t.createElement("h5",{className:`nds-combobox-list-heading--${a}`},n);M.displayName="Combobox.Heading";M.__docgenInfo={description:"",methods:[],displayName:"Combobox.Heading",props:{kind:{defaultValue:{value:'"bold"',computed:!1},description:"Display variant of heading\n`bold` - Dark, large headings\n`hint` - Light, small headings",type:{name:"enum",value:[{value:'"bold"',computed:!1},{value:'"hint"',computed:!1}]},required:!1},text:{description:"Text of the heading",type:{name:"string"},required:!0}}};const E=({children:n})=>t.createElement(t.Fragment,null,n);E.displayName="Combobox.Category";E.propTypes={label:l.string.isRequired,children:l.oneOfType([l.node,l.arrayOf(l.node)])};E.__docgenInfo={description:"",methods:[],displayName:"Combobox.Category",props:{label:{description:"",type:{name:"string"},required:!0},children:{description:"",type:{name:"union",value:[{name:"node"},{name:"arrayOf",value:{name:"node"}}]},required:!1}}};const ue=()=>{},A=({onSelect:n=ue})=>t.createElement(t.Fragment,null);A.displayName="Combobox.Action";A.propTypes={onSelect:l.func.isRequired,label:l.string.isRequired};A.__docgenInfo={description:"",methods:[],displayName:"Combobox.Action",props:{onSelect:{defaultValue:{value:"() => {}",computed:!1},description:"Side effect to run on selection",type:{name:"func"},required:!1},label:{description:"Label for action",type:{name:"string"},required:!0}}};function v(){return v=Object.assign?Object.assign.bind():function(n){for(var a=1;a<arguments.length;a++){var o=arguments[a];for(var s in o)({}).hasOwnProperty.call(o,s)&&(n[s]=o[s])}return n},v.apply(null,arguments)}const j=()=>{},Ne=se.icons.map(n=>n.properties.name),x=n=>{let a=!1;return n&&n.props&&(a="label"in n.props),a},L=n=>{let a=!1;return n&&(a=x(n)||"value"in n.props),a},pe=(n,a,o,s,f)=>{let p=!1;if(a>-1&&o.length>0){const d=o[a].props.value;p=s.map(h=>h.props.value).includes(d)}return typeof n=="string"&&n.length>0&&(p=!0),f&&(p=s.map(d=>d.props.value).includes(f.props.value)),p},de=(n,a)=>a.map(s=>s.props.value).reduce((s,f)=>{const p=n.find(d=>f===d.props.value);return p&&s.push(p),s},[]),me=(n,a)=>n.filter(o=>(o.props.searchValue||o.props.value).toLowerCase().startsWith(a)),U=n=>t.createElement("span",{className:`fontSize--l fontColor--primary narmi-icon-${n?"chevron-up":"chevron-down"}`}),N=({label:n,onChange:a=j,onInputChange:o=j,inputValue:s,filterItemsByInput:f=me,children:p,disableFiltering:d=!1,clearSelectionOnAction:O=!1,errorText:h,icon:P,testId:J,renderEndContent:G=U,maxMenuHeight:K="40vh"})=>{const g=W.useMemo(()=>t.Children.toArray(p),[p]),k=g.some(({type:e})=>e.displayName===E.displayName);let B=[],c=g.length<1?[]:g.filter(({props:e})=>"value"in e||"text"in e);k?(c=g.flatMap(({props:e})=>t.Children.toArray(e.children)),B=g.map(({props:e})=>({label:e.label,categoryChildren:t.Children.toArray(e.children)}))):c=g;const[m,q]=W.useState(c),_=e=>e?.props?.searchValue||e?.props?.value||"",{isOpen:C,selectedItem:I,getInputProps:Q,getMenuProps:X,getItemProps:Y,highlightedIndex:R,inputValue:b,openMenu:Z,closeMenu:F,reset:ee}=re({items:m,inputValue:s,itemToString:_,onInputValueChange:({inputValue:e})=>{if(e.length===0){q(c),ee(),o("");return}if(!d){const r=c.filter(x),i=f(c.filter(u=>!x(u)&&L(u)),e.toLowerCase());q([...i,...r])}o(e)},onSelectedItemChange:({selectedItem:e})=>{a(e?e.props.value:""),F()},stateReducer:(e,r)=>{const{changes:i}=r,{selectedItem:u}=e,{selectedItem:V}=i;return x(V)?(V.props.onSelect(),{...i,selectedItem:O?null:u,inputValue:O?"":_(u),isOpen:!1}):i}}),{anchorProps:te,layerProps:ne}=ce({isOpen:C,setIsOpen:e=>{e||F()}});W.useEffect(()=>{(!b||b.length===0)&&c.length!==m.length&&q(c)},[c,b]);const H=!!I,D=(e,r)=>{const i=x(e);let u=t.createElement("li",{key:`${e}-${r}`,className:"alignChild--left--center"},e);return L(e)&&(u=t.createElement("li",v({key:`${e}-${r}`,className:$(["nds-combobox-item","alignChild--left--center padding--x--s",{"nds-combobox-action":i,"padding--y--xs":!k,"nds-combobox-item--highlighted":R===r,"rounded--top":r===0,"rounded--bottom":r===m.length-1}])},Y({item:e,index:r})),i&&t.createElement(y,{as:"span",gapSize:"xxs"},t.createElement(y.Item,{as:"span",shrink:!0},t.createElement("span",{className:"narmi-icon-plus fontWeight--bold"})),t.createElement(y.Item,{as:"span"},t.createElement("span",{className:"fontWeight--semibold"},e.props.label))),!i&&t.createElement(y,{as:"span"},t.createElement(y.Item,{as:"span"},e),H&&I.props.value===e.props.value&&t.createElement(y.Item,{as:"span",shrink:!0},t.createElement("span",{className:"narmi-icon-check fontSize--l fontWeight--bold"}))))),u},ae=({label:e,categoryChildren:r})=>{const i={},u=de(m,r),V=u.length>0;return pe(b,R,m,r,I)&&(i.open=!0),V?t.createElement("details",v({key:e,className:"nds-combobox-category",tabIndex:-1},i),t.createElement("summary",{className:"fontWeight--bold alignChild--left--center padding--x--s padding--y-xs",onFocus:S=>{S.target.blur()}},t.createElement("span",{id:`combobox-category-${e}`},e),t.createElement("span",{className:"nds-category-icon narmi-icon-chevron-down"}),t.createElement("span",{className:"nds-category-icon narmi-icon-chevron-up"})),t.createElement("ul",{className:"list--reset","aria-labelledby":`combobox-category-${e}`},u.map(S=>D(S,ie(S,m))))):null},T=()=>{C||(Z(),H&&q(c.filter(L)))},oe=()=>{o(I?_(I):""),R!==-1&&F()};return c.length<1?t.createElement(z,{error:h,label:n,startIcon:P,onChange:o,value:b}):t.createElement(t.Fragment,null,t.createElement("div",{className:$(["nds-combobox",{"nds-combobox--active":C}]),"data-testid":J},t.createElement("div",te,t.createElement(z,v({error:h,renderError:!1,label:n,value:b,startIcon:P,endContent:G(C)},Q({onBlur:oe,onFocus:T,onClick:T}),{onClick:T}))),t.createElement(le,{error:h,className:"margin--top--xs"}),t.createElement("div",ne,t.createElement("ul",v({className:$(["nds-combobox-list","list--reset","bgColor--white",{"nds-combobox-list--error":!!h}])},X(),{style:{maxHeight:K}}),C&&(k?B.map(ae):m.map(D))))))};N.Item=w;N.Heading=M;N.Category=E;N.Action=A;U.__docgenInfo={description:`@param {Boolean} isOpen whether the combobox is open
@returns {React.ReactNode} chevron icon that toggles based on the open state of the combobox`,methods:[],displayName:"defaultRenderEndContent"};N.__docgenInfo={description:`Autocomplete input component following the accessible
[ARIA combobox pattern](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles/combobox_role).

Autocomplete options are defined by passing the \`Combobox.Item\` subcomponent
as children. To add heading dividers, use the \`Combobox.Heading\` subcomponent.

By default options will be filtered down as the user types in the input. This
behavior can be disabled via the \`disableFiltering\` prop.`,methods:[{name:"Item",docblock:null,modifiers:["static"],params:[{name:"{ children, value }",optional:!1,type:null}],returns:null},{name:"Heading",docblock:null,modifiers:["static"],params:[{name:'{ text, kind = "bold" }',optional:!1,type:null}],returns:null},{name:"Category",docblock:null,modifiers:["static"],params:[{name:"{ children }",optional:!1,type:null}],returns:null},{name:"Action",docblock:null,modifiers:["static"],params:[{name:"{ onSelect = noop }",optional:!1,type:null}],returns:null}],displayName:"Combobox",props:{onChange:{defaultValue:{value:"() => {}",computed:!1},description:"Change callback.\nCalled when an item is selected, with the `value` of the selected item.\nCalled with empty string when the user clears the input.",type:{name:"func"},required:!1},onInputChange:{defaultValue:{value:"() => {}",computed:!1},description:"Input change callback. Called whenever the user updates the value of the input.",type:{name:"func"},required:!1},filterItemsByInput:{defaultValue:{value:`(items, inputValue) =>
items.filter((item) => {
  const query = item.props.searchValue || item.props.value;
  return query.toLowerCase().startsWith(inputValue);
})`,computed:!1},description:"Optionally pass a function to customize filtering behavior\n\nSignature: `(items, inputValue) => [...filteredItems]`",type:{name:"func"},required:!1},disableFiltering:{defaultValue:{value:"false",computed:!1},description:"Set to `true` to disable the default behavior of filtering the list\nas the user types.",type:{name:"bool"},required:!1},clearSelectionOnAction:{defaultValue:{value:"false",computed:!1},description:"When `true`, selecting an action will clear any existing selection.",type:{name:"bool"},required:!1},renderEndContent:{defaultValue:{value:`(isOpen) => (
  <span
    className={\`fontSize--l fontColor--primary narmi-icon-\${
      isOpen ? "chevron-up" : "chevron-down"
    }\`}
  />
)`,computed:!1},description:`Function to render content at the end of the input.
Defaults to a function that renders a chevron icon that toggles based on the open state of the combobox.

Signature: \`(isOpen) => React.ReactNode\``,type:{name:"func"},required:!1},maxMenuHeight:{defaultValue:{value:'"40vh"',computed:!1},description:"Optional override to set CSS value for max height of menu",type:{name:"string"},required:!1},children:{description:"",type:{name:"union",value:[{name:"node"},{name:"arrayOf",value:{name:"node"}}]},required:!0},label:{description:"Label for the input",type:{name:"string"},required:!0},inputValue:{description:"Sets value of the input in a controlled manner.\nWhen using the `inputValue` prop, you **must** update it via the\n`onInputChange` handler.",type:{name:"string"},required:!1},errorText:{description:`Error message.
When passed, this will cause the input to render in error state.`,type:{name:"string"},required:!1},icon:{description:"Name of icon to place at the start of the input",type:{name:"enum",computed:!0,value:"VALID_ICON_NAMES"},required:!1},testId:{description:"Optional value for `data-testid` attribute",type:{name:"string"},required:!1}}};export{N as C,Ne as V,M as a,w as b};
