import{e as a,r as D}from"./iframe-BBFkYpee.js";import{P as t}from"./index-CA1B0jeb.js";import{a as $}from"./downshift.esm-9hAcM_hs.js";import{u as ae}from"./index-BysYyVLb.js";import{c as E}from"./index-RvS1aOr8.js";import{R as V}from"./index-U9exmUpV.js";import{D as ne}from"./index--iBE-Pm0.js";import{E as se}from"./index-Dos-RCSj.js";const q=({children:n})=>a.createElement(a.Fragment,null,n);q.displayName="Select.Item";q.propTypes={value:t.string.isRequired,searchValue:t.string,children:t.oneOfType([t.node,t.arrayOf(t.node)])};q.__docgenInfo={description:"",methods:[],displayName:"Select.Item",props:{value:{description:`String representation of the option.

This value is also used as a typeahead; if a user types "n" while
the Select is open, highlight will move to the first item with a
value starting with \`n\`.`,type:{name:"string"},required:!0},searchValue:{description:"Custom typeahead string. By default typeahead uses `value`.\nUse this prop to pass in a custom string you'd like the user to search\nagainst when using typeahead.",type:{name:"string"},required:!1},children:{description:"",type:{name:"union",value:[{name:"node"},{name:"arrayOf",value:{name:"node"}}]},required:!1}}};const C=({children:n})=>a.createElement(a.Fragment,null,n);C.displayName="Select.Action";C.propTypes={onSelect:t.func.isRequired,children:t.oneOfType([t.node,t.arrayOf(t.node)])};C.__docgenInfo={description:"",methods:[],displayName:"Select.Action",props:{onSelect:{description:"Side effect to run on selection",type:{name:"func"},required:!0},children:{description:"",type:{name:"union",value:[{name:"node"},{name:"arrayOf",value:{name:"node"}}]},required:!1}}};const w=({children:n})=>a.createElement(a.Fragment,null,n);w.displayName="Select.Category";w.propTypes={label:t.string,kind:t.oneOf(["heading","label"]),children:t.oneOfType([t.node,t.arrayOf(t.node)]),isFlat:t.bool};w.__docgenInfo={description:"",methods:[],displayName:"Select.Category",props:{label:{description:"",type:{name:"string"},required:!1},kind:{description:`heading: default bold heading
label: match input floating label`,type:{name:"enum",value:[{value:'"heading"',computed:!1},{value:'"label"',computed:!1}]},required:!1},children:{description:"",type:{name:"union",value:[{name:"node"},{name:"arrayOf",value:{name:"node"}}]},required:!1},isFlat:{description:"",type:{name:"bool"},required:!1}}};function u(){return u=Object.assign?Object.assign.bind():function(n){for(var s=1;s<arguments.length;s++){var l=arguments[s];for(var r in l)({}).hasOwnProperty.call(l,r)&&(n[r]=l[r])}return n},u.apply(null,arguments)}const re=()=>{},d=n=>{let s=!1;return n&&n.props&&(s="onSelect"in n.props),s},le=n=>{let s="";return n&&!d(n)&&(s=n.props.children),s},W=(n,s)=>s.filter(r=>!d(r)).filter(({props:r})=>r.value===n).pop()||"",ie=(n,s)=>{let l=0;return d(n)?l=s.map(({props:r})=>r.onSelect).indexOf(n.props.onSelect):l=s.map(({props:r})=>r.value).indexOf(n.props.value),l},oe=(n,s,l)=>{if(n<0)return!1;const r=l[n].props.value;return s.map(b=>b.props.value).includes(r)},ce=(n,s)=>{if(!n||d(n))return!1;const l=n.props.value;return s.map(m=>m.props.value).includes(l)},de=(n="",s)=>d(s)?"":s.props.searchValue||s.props.value,v=({id:n,label:s,children:l,onChange:r=re,value:m,defaultValue:b,defaultOpen:H=!1,disabled:x=!1,getTypeaheadString:U=de,clearSelectionOnAction:A=!1,errorText:N,testId:L,maxMenuHeight:j="40vh"})=>{let o=[],T=[];const f=D.useMemo(()=>a.Children.toArray(l).filter(e=>!d(e)),[l]),S=a.Children.toArray(l).filter(d),[P,F]=D.useState("");f.some(({type:e})=>e.displayName==="Select.Category")?(o=[...f.flatMap(({props:e})=>a.Children.toArray(e.children)),...S],T=f.map(({props:e})=>({label:e.label,categoryChildren:a.Children.toArray(e.children),kind:e.kind,isFlat:e.isFlat}))):o=[...f,...S];const k={id:n||`nds-select-${s}`,items:o,disabled:x,initialSelectedItem:b&&W(b,o),initialIsOpen:H,itemToString:e=>U(P,e),onSelectedItemChange:({selectedItem:e})=>{e&&!d(e)&&r(e.props?e.props.value:"")},stateReducer:(e,i)=>{const{type:c,changes:p}=i,{selectedItem:y}=e,{selectedItem:R}=p;let B=p.isOpen;if(c===$.stateChangeTypes.ToggleButtonKeyDownCharacter){const{inputValue:te}=p;F(te),B=!0}else F("");return d(R)?(R.props.onSelect(),A&&r(""),{...p,selectedItem:A?null:y,isOpen:!1}):{...p,isOpen:B}}};m!==void 0&&(k.selectedItem=W(m,o));const{isOpen:_,selectedItem:g,getToggleButtonProps:z,getLabelProps:G,getMenuProps:K,highlightedIndex:M,getItemProps:J,closeMenu:Q}=$(k),{anchorProps:X,layerProps:Y}=ae({isOpen:_,setIsOpen:e=>{e||Q()}}),I=T.length>0,Z=g!==null&&g.props,O=_&&o.length>0,h=(e,i)=>{const c=ie(e,i);return a.createElement("li",u({key:`item-${c}`,className:E(["nds-select-item","alignChild--left--center padding--x--s padding--y--xs",{"nds-select-item--highlighted":M===c,"rounded--top":c===0,"rounded--bottom":c===i.length-1,"nds-select-item--hasGutter":I}])},J({item:e,index:c})),a.createElement(V,{as:"span"},a.createElement(V.Item,{as:"span"},e),Z&&g.props.value===e.props.value&&a.createElement(V.Item,{as:"span",shrink:!0},a.createElement("span",{className:"narmi-icon-check fontSize--l fontWeight--bold"}))))},ee=e=>{let i={};return(oe(M,e,o)||ce(g,e))&&(i.open=!0),i};return a.createElement("div",{className:"nds-select","data-testid":L},a.createElement("div",X,a.createElement(ne,u({isOpen:O,labelText:s,disabled:x,displayValue:le(g)||P,labelProps:{...G()},hasError:!!N},z()))),a.createElement(se,{error:N}),a.createElement("div",Y,a.createElement("div",u({className:E(["nds-select-list","bgColor--white",{"nds-select-list--error":!!N}])},K(),{style:{maxHeight:j}}),O&&I&&T.map(({label:e,kind:i,categoryChildren:c,isFlat:p})=>p?a.createElement(a.Fragment,null,e&&a.createElement("h4",{id:`select-category-${e}`,className:E(["fontFamily--default","padding--x--s padding--y--xs",{"select-category-title--label":i==="label","select-category-title--heading":i==="heading"}])},e),a.createElement("ul",{className:"list--reset","aria-labelledby":`select-category-${e}`},c.map(y=>h(y,o)))):a.createElement("details",u({key:e,className:"nds-select-category"},ee(c)),a.createElement("summary",{className:E(["alignChild--left--center","padding--x--s",{"select-category-title--label":i==="label","select-category-title--heading":i==="heading"||!i}])},a.createElement("span",{id:`select-category-${e}`},e),a.createElement("span",{className:"nds-category-icon narmi-icon-chevron-down"}),a.createElement("span",{className:"nds-category-icon narmi-icon-chevron-up"})),a.createElement("ul",{className:"list--reset","aria-labelledby":`select-category-${e}`},c.map(y=>h(y,o))))),O&&I&&a.createElement("ul",{className:"list--reset"},S.map(e=>h(e,o))),O&&!I&&a.createElement("ul",{className:"list--reset"},f.map(e=>h(e,o)),S.map(e=>h(e,o))))))};v.propTypes={id:t.string.isRequired,label:t.string.isRequired,onChange:t.func,value:t.string,getTypeaheadString:t.func,clearSelectionOnAction:t.bool,defaultValue:t.string,defaultOpen:t.bool,errorText:t.string,children:t.oneOfType([t.node,t.arrayOf(t.node)]),testId:t.string,disabled:t.bool,maxMenuHeight:t.string};v.Item=q;v.Action=C;v.Category=w;v.__docgenInfo={description:"Accessible custom select control for giving users the ability to select one option from a list of options.\n`Select` also supports the ability to pass in a `<Select.Action>` that acts as an option that only triggers a side effect.\nTypeahead is enabled based on the `value` prop of `<Select.Item>` elements passed in.",methods:[{name:"Item",docblock:null,modifiers:["static"],params:[{name:"{ children }",optional:!1,type:null}],returns:null},{name:"Action",docblock:null,modifiers:["static"],params:[{name:"{ children }",optional:!1,type:null}],returns:null},{name:"Category",docblock:null,modifiers:["static"],params:[{name:"{ children }",optional:!1,type:null}],returns:null}],displayName:"Select",props:{onChange:{defaultValue:{value:"() => {}",computed:!1},description:"Change callback. Called with value string from the selected item",type:{name:"func"},required:!1},defaultOpen:{defaultValue:{value:"false",computed:!1},description:"Open the dropdown on render if `true`",type:{name:"bool"},required:!1},disabled:{defaultValue:{value:"false",computed:!1},description:`When true, Select renders a disabled button with the appearance
of a disabled input. User interaction is disabled.`,type:{name:"bool"},required:!1},getTypeaheadString:{defaultValue:{value:`(userInput = "", selectItem) => {
  if (isAction(selectItem)) return "";
  return selectItem.props.searchValue || selectItem.props.value;
}`,computed:!1},description:'Function with signature `(userInputValue, selectItemNode) => {}`,\nused to customize typeahead filtering behavior.\nSee "Changing Typeahead Behavior" story for example.',type:{name:"func"},required:!1},clearSelectionOnAction:{defaultValue:{value:"false",computed:!1},description:"When `true`, selecting an action will clear any existing selection.",type:{name:"bool"},required:!1},maxMenuHeight:{defaultValue:{value:'"40vh"',computed:!1},description:"Optional override to set CSS value for max height of menu",type:{name:"string"},required:!1},id:{description:"unique id attribute of the input (used for `htmlFor`)",type:{name:"string"},required:!0},label:{description:"Label for the select control",type:{name:"string"},required:!0},value:{description:"Sets selected item by value and makes the Select **fully controlled**.\n\nWhen passing a `value`, you must provide an `onChange` handler to update it",type:{name:"string"},required:!1},defaultValue:{description:"Use to set a default selection by passing the `value` prop\nof one of the `<Select.Item>` children.\nThe Select will remain uncontrolled.",type:{name:"string"},required:!1},errorText:{description:`Error message.
When passed, this will cause the trigger to render in error state.`,type:{name:"string"},required:!1},children:{description:"",type:{name:"union",value:[{name:"node"},{name:"arrayOf",value:{name:"node"}}]},required:!1},testId:{description:"Optional value for `data-testid` attribute",type:{name:"string"},required:!1}}};export{v as S,C as a,q as b,ie as g};
