import{e as t,r as W}from"./iframe-BBMgbPSV.js";import{P as a}from"./index-Sb7vjpsS.js";import{c as $}from"./index-RvS1aOr8.js";import{i as re}from"./selection-CAkQuomx.js";import{b as se}from"./downshift.esm-BqchPSUc.js";import{E as le}from"./index-CtKShrXm.js";import{T as z}from"./index-0KUxTVlH.js";import{R as y}from"./index-DD9-6ILY.js";import{g as ie}from"./index-CtJhZnbj.js";import{u as ce}from"./index-pHSFgreW.js";const w=({children:n,value:o})=>t.createElement(t.Fragment,null,n||o);w.displayName="Combobox.Item";w.propTypes={value:a.string.isRequired,searchValue:a.string,children:a.oneOfType([a.node,a.arrayOf(a.node)])};w.__docgenInfo={description:"",methods:[],displayName:"Combobox.Item",props:{value:{description:`String representation of the option.

This value is also used as a typeahead; if a user types "n" while
the Select is open, highlight will move to the first item with a
value starting with \`n\`.`,type:{name:"string"},required:!0},searchValue:{description:"Custom typeahead string. By default, typeahead uses `value`.\nUse this prop to pass in a custom string you'd like the user to search\nagainst when using typeahead.",type:{name:"string"},required:!1},children:{description:"",type:{name:"union",value:[{name:"node"},{name:"arrayOf",value:{name:"node"}}]},required:!1}}};const O=({text:n,kind:o="bold"})=>t.createElement("h5",{className:`nds-combobox-list-heading--${o}`},n);O.displayName="Combobox.Heading";O.propTypes={text:a.string.isRequired,kind:a.oneOf(["bold","hint"])};O.__docgenInfo={description:"",methods:[],displayName:"Combobox.Heading",props:{kind:{defaultValue:{value:'"bold"',computed:!1},description:"Display variant of heading\n`bold` - Dark, large headings\n`hint` - Light, small headings",type:{name:"enum",value:[{value:'"bold"',computed:!1},{value:'"hint"',computed:!1}]},required:!1},text:{description:"Text of the heading",type:{name:"string"},required:!0}}};const N=({children:n})=>t.createElement(t.Fragment,null,n);N.displayName="Combobox.Category";N.propTypes={label:a.string.isRequired,children:a.oneOfType([a.node,a.arrayOf(a.node)])};N.__docgenInfo={description:"",methods:[],displayName:"Combobox.Category",props:{label:{description:"",type:{name:"string"},required:!0},children:{description:"",type:{name:"union",value:[{name:"node"},{name:"arrayOf",value:{name:"node"}}]},required:!1}}};const ue=()=>{},A=({onSelect:n=ue})=>t.createElement(t.Fragment,null);A.displayName="Combobox.Action";A.propTypes={onSelect:a.func.isRequired,label:a.string.isRequired};A.__docgenInfo={description:"",methods:[],displayName:"Combobox.Action",props:{onSelect:{defaultValue:{value:"() => {}",computed:!1},description:"Side effect to run on selection",type:{name:"func"},required:!1},label:{description:"Label for action",type:{name:"string"},required:!0}}};function v(){return v=Object.assign?Object.assign.bind():function(n){for(var o=1;o<arguments.length;o++){var r=arguments[o];for(var s in r)({}).hasOwnProperty.call(r,s)&&(n[s]=r[s])}return n},v.apply(null,arguments)}const j=()=>{},pe=re.icons.map(n=>n.properties.name),E=n=>{let o=!1;return n&&n.props&&(o="label"in n.props),o},B=n=>{let o=!1;return n&&(o=E(n)||"value"in n.props),o},de=(n,o,r,s,f)=>{let p=!1;if(o>-1&&r.length>0){const d=r[o].props.value;p=s.map(h=>h.props.value).includes(d)}return typeof n=="string"&&n.length>0&&(p=!0),f&&(p=s.map(d=>d.props.value).includes(f.props.value)),p},me=(n,o)=>o.map(s=>s.props.value).reduce((s,f)=>{const p=n.find(d=>f===d.props.value);return p&&s.push(p),s},[]),fe=(n,o)=>n.filter(r=>(r.props.searchValue||r.props.value).toLowerCase().startsWith(o)),U=n=>t.createElement("span",{className:`fontSize--l fontColor--primary narmi-icon-${n?"chevron-up":"chevron-down"}`}),C=({label:n,onChange:o=j,onInputChange:r=j,inputValue:s,filterItemsByInput:f=fe,children:p,disableFiltering:d=!1,clearSelectionOnAction:k=!1,errorText:h,icon:H,testId:J,renderEndContent:G=U,maxMenuHeight:K="40vh"})=>{const g=W.useMemo(()=>t.Children.toArray(p),[p]),R=g.some(({type:e})=>e.displayName===N.displayName);let L=[],c=g.length<1?[]:g.filter(({props:e})=>"value"in e||"text"in e);R?(c=g.flatMap(({props:e})=>t.Children.toArray(e.children)),L=g.map(({props:e})=>({label:e.label,categoryChildren:t.Children.toArray(e.children)}))):c=g;const[m,q]=W.useState(c),_=e=>e?.props?.searchValue||e?.props?.value||"",{isOpen:I,selectedItem:x,getInputProps:Q,getMenuProps:X,getItemProps:Y,highlightedIndex:T,inputValue:b,openMenu:Z,closeMenu:F,reset:ee}=se({items:m,inputValue:s,itemToString:_,onInputValueChange:({inputValue:e})=>{if(e.length===0){q(c),ee(),r("");return}if(!d){const l=c.filter(E),i=f(c.filter(u=>!E(u)&&B(u)),e.toLowerCase());q([...i,...l])}r(e)},onSelectedItemChange:({selectedItem:e})=>{o(e?e.props.value:""),F()},stateReducer:(e,l)=>{const{changes:i}=l,{selectedItem:u}=e,{selectedItem:V}=i;return E(V)?(V.props.onSelect(),{...i,selectedItem:k?null:u,inputValue:k?"":_(u),isOpen:!1}):i}}),{anchorProps:te,layerProps:ne}=ce({isOpen:I,setIsOpen:e=>{e||F()}});W.useEffect(()=>{(!b||b.length===0)&&c.length!==m.length&&q(c)},[c,b]);const P=!!x,D=(e,l)=>{const i=E(e);let u=t.createElement("li",{key:`${e}-${l}`,className:"alignChild--left--center"},e);return B(e)&&(u=t.createElement("li",v({key:`${e}-${l}`,className:$(["nds-combobox-item","alignChild--left--center padding--x--s",{"nds-combobox-action":i,"padding--y--xs":!R,"nds-combobox-item--highlighted":T===l,"rounded--top":l===0,"rounded--bottom":l===m.length-1}])},Y({item:e,index:l})),i&&t.createElement(y,{as:"span",gapSize:"xxs"},t.createElement(y.Item,{as:"span",shrink:!0},t.createElement("span",{className:"narmi-icon-plus fontWeight--bold"})),t.createElement(y.Item,{as:"span"},t.createElement("span",{className:"fontWeight--semibold"},e.props.label))),!i&&t.createElement(y,{as:"span"},t.createElement(y.Item,{as:"span"},e),P&&x.props.value===e.props.value&&t.createElement(y.Item,{as:"span",shrink:!0},t.createElement("span",{className:"narmi-icon-check fontSize--l fontWeight--bold"}))))),u},ae=({label:e,categoryChildren:l})=>{const i={},u=me(m,l),V=u.length>0;return de(b,T,m,l,x)&&(i.open=!0),V?t.createElement("details",v({key:e,className:"nds-combobox-category",tabIndex:-1},i),t.createElement("summary",{className:"fontWeight--bold alignChild--left--center padding--x--s padding--y-xs",onFocus:S=>{S.target.blur()}},t.createElement("span",{id:`combobox-category-${e}`},e),t.createElement("span",{className:"nds-category-icon narmi-icon-chevron-down"}),t.createElement("span",{className:"nds-category-icon narmi-icon-chevron-up"})),t.createElement("ul",{className:"list--reset","aria-labelledby":`combobox-category-${e}`},u.map(S=>D(S,ie(S,m))))):null},M=()=>{I||(Z(),P&&q(c.filter(B)))},oe=()=>{r(x?_(x):""),T!==-1&&F()};return c.length<1?t.createElement(z,{error:h,label:n,startIcon:H,onChange:r,value:b}):t.createElement(t.Fragment,null,t.createElement("div",{className:$(["nds-combobox",{"nds-combobox--active":I}]),"data-testid":J},t.createElement("div",te,t.createElement(z,v({error:h,renderError:!1,label:n,value:b,startIcon:H,endContent:G(I)},Q({onBlur:oe,onFocus:M,onClick:M}),{onClick:M}))),t.createElement(le,{error:h,className:"margin--top--xs"}),t.createElement("div",ne,t.createElement("ul",v({className:$(["nds-combobox-list","list--reset","bgColor--white",{"nds-combobox-list--error":!!h}])},X(),{style:{maxHeight:K}}),I&&(R?L.map(ae):m.map(D))))))};C.propTypes={children:a.oneOfType([a.node,a.arrayOf(a.node)]).isRequired,label:a.string.isRequired,onChange:a.func,inputValue:a.string,onInputChange:a.func,disableFiltering:a.bool,clearSelectionOnAction:a.bool,filterItemsByInput:a.func,errorText:a.string,icon:a.oneOf(pe),testId:a.string,renderEndContent:a.func,maxMenuHeight:a.string};C.Item=w;C.Heading=O;C.Category=N;C.Action=A;U.__docgenInfo={description:`@param {Boolean} isOpen whether the combobox is open
@returns {React.ReactNode} chevron icon that toggles based on the open state of the combobox`,methods:[],displayName:"defaultRenderEndContent"};C.__docgenInfo={description:`Autocomplete input component following the accessible
[ARIA combobox pattern](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles/combobox_role).

Autocomplete options are defined by passing the \`Combobox.Item\` subcomponent
as children. To add heading dividers, use the \`Combobox.Heading\` subcomponent.

By default options will be filtered down as the user types in the input. This
behavior can be disabled via the \`disableFiltering\` prop.`,methods:[{name:"Item",docblock:null,modifiers:["static"],params:[{name:"{ children, value }",optional:!1,type:null}],returns:null},{name:"Heading",docblock:null,modifiers:["static"],params:[{name:'{ text, kind = "bold" }',optional:!1,type:null}],returns:null},{name:"Category",docblock:null,modifiers:["static"],params:[{name:"{ children }",optional:!1,type:null}],returns:null},{name:"Action",docblock:null,modifiers:["static"],params:[{name:"{ onSelect = noop }",optional:!1,type:null}],returns:null}],displayName:"Combobox",props:{onChange:{defaultValue:{value:"() => {}",computed:!1},description:"Change callback.\nCalled when an item is selected, with the `value` of the selected item.\nCalled with empty string when the user clears the input.",type:{name:"func"},required:!1},onInputChange:{defaultValue:{value:"() => {}",computed:!1},description:"Input change callback. Called whenever the user updates the value of the input.",type:{name:"func"},required:!1},filterItemsByInput:{defaultValue:{value:`(items, inputValue) =>
items.filter((item) => {
  const query = item.props.searchValue || item.props.value;
  return query.toLowerCase().startsWith(inputValue);
})`,computed:!1},description:"Optionally pass a function to customize filtering behavior\n\nSignature: `(items, inputValue) => [...filteredItems]`",type:{name:"func"},required:!1},disableFiltering:{defaultValue:{value:"false",computed:!1},description:"Set to `true` to disable the default behavior of filtering the list\nas the user types.",type:{name:"bool"},required:!1},clearSelectionOnAction:{defaultValue:{value:"false",computed:!1},description:"When `true`, selecting an action will clear any existing selection.",type:{name:"bool"},required:!1},renderEndContent:{defaultValue:{value:`(isOpen) => (
  <span
    className={\`fontSize--l fontColor--primary narmi-icon-\${
      isOpen ? "chevron-up" : "chevron-down"
    }\`}
  />
)`,computed:!1},description:`Function to render content at the end of the input.
Defaults to a function that renders a chevron icon that toggles based on the open state of the combobox.

Signature: \`(isOpen) => React.ReactNode\``,type:{name:"func"},required:!1},maxMenuHeight:{defaultValue:{value:'"40vh"',computed:!1},description:"Optional override to set CSS value for max height of menu",type:{name:"string"},required:!1},children:{description:"",type:{name:"union",value:[{name:"node"},{name:"arrayOf",value:{name:"node"}}]},required:!0},label:{description:"Label for the input",type:{name:"string"},required:!0},inputValue:{description:"Sets value of the input in a controlled manner.\nWhen using the `inputValue` prop, you **must** update it via the\n`onInputChange` handler.",type:{name:"string"},required:!1},errorText:{description:`Error message.
When passed, this will cause the input to render in error state.`,type:{name:"string"},required:!1},icon:{description:"Name of icon to place at the start of the input",type:{name:"enum",computed:!0,value:"VALID_ICON_NAMES"},required:!1},testId:{description:"Optional value for `data-testid` attribute",type:{name:"string"},required:!1}}};export{C,pe as V,O as a,w as b};
