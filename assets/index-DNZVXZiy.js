import{e as t,r as R}from"./iframe-C2GiQxmI.js";import{a as $}from"./downshift.esm-DwlqoaV8.js";import{u as ae}from"./index-DVLYIVHb.js";import{c as E}from"./index-RvS1aOr8.js";import{R as x}from"./index-H0FE9JcS.js";import{D as ne}from"./index-CXxQfNKn.js";import{E as se}from"./index-DvmsuEf6.js";import{P as s}from"./index-Bmp4nDZ5.js";const O=({children:a})=>t.createElement(t.Fragment,null,a);O.displayName="Select.Item";O.propTypes={value:s.string.isRequired,searchValue:s.string.isRequired,children:s.oneOfType([s.node,s.arrayOf(s.node)])};O.__docgenInfo={description:"",methods:[],displayName:"Select.Item",props:{value:{description:`String representation of the option.

This value is also used as a typeahead; if a user types "n" while
the Select is open, highlight will move to the first item with a
value starting with \`n\`.`,type:{name:"string"},required:!0},searchValue:{description:"Custom typeahead string. By default typeahead uses `value`.\nUse this prop to pass in a custom string you'd like the user to search\nagainst when using typeahead.",type:{name:"string"},required:!0},children:{description:"",type:{name:"union",value:[{name:"node"},{name:"arrayOf",value:{name:"node"}}]},required:!1}}};const q=({children:a})=>t.createElement(t.Fragment,null,a);q.displayName="Select.Action";q.propTypes={onSelect:s.func.isRequired,children:s.oneOfType([s.node,s.arrayOf(s.node)])};q.__docgenInfo={description:"",methods:[],displayName:"Select.Action",props:{onSelect:{description:"Side effect to run on selection",type:{name:"func"},required:!0},children:{description:"",type:{name:"union",value:[{name:"node"},{name:"arrayOf",value:{name:"node"}}]},required:!1}}};const C=({children:a})=>t.createElement(t.Fragment,null,a);C.displayName="Select.Category";C.propTypes={label:s.string,kind:s.oneOf(["heading","label"]),children:s.oneOfType([s.node,s.arrayOf(s.node)]),isFlat:s.bool};C.__docgenInfo={description:"",methods:[],displayName:"Select.Category",props:{label:{description:"",type:{name:"string"},required:!1},kind:{description:`heading: default bold heading
label: match input floating label`,type:{name:"enum",value:[{value:'"heading"',computed:!1},{value:'"label"',computed:!1}]},required:!1},children:{description:"",type:{name:"union",value:[{name:"node"},{name:"arrayOf",value:{name:"node"}}]},required:!1},isFlat:{description:"",type:{name:"bool"},required:!1}}};function u(){return u=Object.assign?Object.assign.bind():function(a){for(var n=1;n<arguments.length;n++){var l=arguments[n];for(var r in l)({}).hasOwnProperty.call(l,r)&&(a[r]=l[r])}return a},u.apply(null,arguments)}const re=()=>{},d=a=>{let n=!1;return a&&a.props&&(n="onSelect"in a.props),n},le=a=>{let n="";return a&&!d(a)&&(n=a.props.children),n},W=(a,n)=>n.filter(r=>!d(r)).filter(({props:r})=>r.value===a).pop()||"",ie=(a,n)=>{let l=0;return d(a)?l=n.map(({props:r})=>r.onSelect).indexOf(a.props.onSelect):l=n.map(({props:r})=>r.value).indexOf(a.props.value),l},oe=(a,n,l)=>{if(a<0)return!1;const r=l[a].props.value;return n.map(v=>v.props.value).includes(r)},ce=(a,n)=>{if(!a||d(a))return!1;const l=a.props.value;return n.map(m=>m.props.value).includes(l)},de=(a="",n)=>d(n)?"":n.props.searchValue||n.props.value,w=({id:a,label:n,children:l,onChange:r=re,value:m,defaultValue:v,defaultOpen:U=!1,disabled:T=!1,getTypeaheadString:H=de,clearSelectionOnAction:A=!1,errorText:N,testId:L,maxMenuHeight:j="40vh"})=>{let o=[],V=[];const f=R.useMemo(()=>t.Children.toArray(l).filter(e=>!d(e)),[l]),S=t.Children.toArray(l).filter(d),[P,F]=R.useState("");f.some(({type:e})=>e.displayName==="Select.Category")?(o=[...f.flatMap(({props:e})=>t.Children.toArray(e.children)),...S],V=f.map(({props:e})=>({label:e.label,categoryChildren:t.Children.toArray(e.children),kind:e.kind,isFlat:e.isFlat}))):o=[...f,...S];const k={id:a||`nds-select-${n}`,items:o,disabled:T,initialSelectedItem:v&&W(v,o),initialIsOpen:U,itemToString:e=>H(P,e),onSelectedItemChange:({selectedItem:e})=>{e&&!d(e)&&r(e.props?e.props.value:"")},stateReducer:(e,i)=>{const{type:c,changes:p}=i,{selectedItem:y}=e,{selectedItem:D}=p;let M=p.isOpen;if(c===$.stateChangeTypes.ToggleButtonKeyDownCharacter){const{inputValue:te}=p;F(te),M=!0}else F("");return d(D)?(D.props.onSelect(),A&&r(""),{...p,selectedItem:A?null:y,isOpen:!1}):{...p,isOpen:M}}};m!==void 0&&(k.selectedItem=W(m,o));const{isOpen:_,selectedItem:g,getToggleButtonProps:z,getLabelProps:G,getMenuProps:K,highlightedIndex:B,getItemProps:J,closeMenu:Q}=$(k),{anchorProps:X,layerProps:Y}=ae({isOpen:_,setIsOpen:e=>{e||Q()}}),b=V.length>0,Z=g!==null&&g.props,I=_&&o.length>0,h=(e,i)=>{const c=ie(e,i);return t.createElement("li",u({key:`item-${c}`,className:E(["nds-select-item","alignChild--left--center padding--x--s padding--y--xs",{"nds-select-item--highlighted":B===c,"rounded--top":c===0,"rounded--bottom":c===i.length-1,"nds-select-item--hasGutter":b}])},J({item:e,index:c})),t.createElement(x,{as:"span"},t.createElement(x.Item,{as:"span"},e),Z&&g.props.value===e.props.value&&t.createElement(x.Item,{as:"span",shrink:!0},t.createElement("span",{className:"narmi-icon-check fontSize--xl fontWeight--bold"}))))},ee=e=>{let i={};return(oe(B,e,o)||ce(g,e))&&(i.open=!0),i};return t.createElement("div",{className:"nds-select","data-testid":L},t.createElement("div",X,t.createElement(ne,u({isOpen:I,labelText:n,disabled:T,displayValue:le(g)||P,labelProps:{...G()},hasError:!!N},z()))),t.createElement(se,{error:N}),t.createElement("div",Y,t.createElement("div",u({className:E(["nds-select-list","bgColor--white",{"nds-select-list--error":!!N}])},K(),{style:{maxHeight:j}}),I&&b&&V.map(({label:e,kind:i,categoryChildren:c,isFlat:p})=>p?t.createElement(t.Fragment,null,e&&t.createElement("h4",{id:`select-category-${e}`,className:E(["fontFamily--default","padding--x--s padding--y--xs",{"select-category-title--label":i==="label","select-category-title--heading":i==="heading"}])},e),t.createElement("ul",{className:"list--reset","aria-labelledby":`select-category-${e}`},c.map(y=>h(y,o)))):t.createElement("details",u({key:e,className:"nds-select-category"},ee(c)),t.createElement("summary",{className:E(["alignChild--left--center","padding--x--s",{"select-category-title--label":i==="label","select-category-title--heading":i==="heading"||!i}])},t.createElement("span",{id:`select-category-${e}`},e),t.createElement("span",{className:"nds-category-icon narmi-icon-chevron-down"}),t.createElement("span",{className:"nds-category-icon narmi-icon-chevron-up"})),t.createElement("ul",{className:"list--reset","aria-labelledby":`select-category-${e}`},c.map(y=>h(y,o))))),I&&b&&t.createElement("ul",{className:"list--reset"},S.map(e=>h(e,o))),I&&!b&&t.createElement("ul",{className:"list--reset"},f.map(e=>h(e,o)),S.map(e=>h(e,o))))))};w.Item=O;w.Action=q;w.Category=C;w.__docgenInfo={description:"Accessible custom select control for giving users the ability to select one option from a list of options.\n`Select` also supports the ability to pass in a `<Select.Action>` that acts as an option that only triggers a side effect.\nTypeahead is enabled based on the `value` prop of `<Select.Item>` elements passed in.",methods:[{name:"Item",docblock:null,modifiers:["static"],params:[{name:"{ children }",optional:!1,type:null}],returns:null},{name:"Action",docblock:null,modifiers:["static"],params:[{name:"{ children }",optional:!1,type:null}],returns:null},{name:"Category",docblock:null,modifiers:["static"],params:[{name:"{ children }",optional:!1,type:null}],returns:null}],displayName:"Select",props:{onChange:{defaultValue:{value:"() => {}",computed:!1},description:"Change callback. Called with value string from the selected item",type:{name:"func"},required:!1},defaultOpen:{defaultValue:{value:"false",computed:!1},description:"Open the dropdown on render if `true`",type:{name:"bool"},required:!1},disabled:{defaultValue:{value:"false",computed:!1},description:`When true, Select renders a disabled button with the appearance
of a disabled input. User interaction is disabled.`,type:{name:"bool"},required:!1},getTypeaheadString:{defaultValue:{value:`(userInput = "", selectItem) => {
  if (isAction(selectItem)) return "";
  return selectItem.props.searchValue || selectItem.props.value;
}`,computed:!1},description:'Function with signature `(userInputValue, selectItemNode) => {}`,\nused to customize typeahead filtering behavior.\nSee "Changing Typeahead Behavior" story for example.',type:{name:"func"},required:!1},clearSelectionOnAction:{defaultValue:{value:"false",computed:!1},description:"When `true`, selecting an action will clear any existing selection.",type:{name:"bool"},required:!1},maxMenuHeight:{defaultValue:{value:'"40vh"',computed:!1},description:"Optional override to set CSS value for max height of menu",type:{name:"string"},required:!1},id:{description:"unique id attribute of the input (used for `htmlFor`)",type:{name:"string"},required:!0},label:{description:"Label for the select control",type:{name:"string"},required:!0},value:{description:"Sets selected item by value and makes the Select **fully controlled**.\n\nWhen passing a `value`, you must provide an `onChange` handler to update it",type:{name:"string"},required:!1},defaultValue:{description:"Use to set a default selection by passing the `value` prop\nof one of the `<Select.Item>` children.\nThe Select will remain uncontrolled.",type:{name:"string"},required:!1},errorText:{description:`Error message.
When passed, this will cause the trigger to render in error state.`,type:{name:"string"},required:!1},children:{description:"",type:{name:"union",value:[{name:"node"},{name:"arrayOf",value:{name:"node"}}]},required:!1},testId:{description:"Optional value for `data-testid` attribute",type:{name:"string"},required:!1}}};export{w as S,q as a,O as b,ie as g};
