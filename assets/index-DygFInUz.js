import{e,r as _}from"./iframe-BsoQ3yoX.js";import{c as T}from"./index-RvS1aOr8.js";import{u as k}from"./downshift.esm-Iq52HE0-.js";import{u as W,c as B}from"./dom-DTUjJ1hJ.js";import{R as d}from"./index-jRGuS3xT.js";import{T as D}from"./index-CDeLqYxa.js";const C=({children:a,value:l})=>e.createElement(e.Fragment,null,a||l);C.displayName="TableAutocomplete.Item";try{TableAutocomplete.Item.displayName="TableAutocomplete.Item",TableAutocomplete.Item.__docgenInfo={description:"",displayName:"TableAutocomplete.Item",props:{value:{defaultValue:null,description:"String representation of the option.",name:"value",required:!0,type:{name:"string"}},searchValue:{defaultValue:null,description:"Custom typeahead string. By default, typeahead uses `value`.",name:"searchValue",required:!1,type:{name:"string"}}}}}catch{}function i(){return i=Object.assign?Object.assign.bind():function(a){for(var l=1;l<arguments.length;l++){var r=arguments[l];for(var u in r)({}).hasOwnProperty.call(r,u)&&(a[u]=r[u])}return a},i.apply(null,arguments)}const m=a=>a?.props.searchValue||a?.props.value||"",M=(a,l)=>a.filter(r=>m(r).toLowerCase().startsWith(l.toLowerCase())),f=({label:a,children:l,onChange:r=()=>{},onInputChange:u=()=>{},filterItemsByInput:g=M,footerContent:b,placeholder:E,isDisabled:h=!1,hasError:N=!1,inputValue:o})=>{const s=o!==void 0,n=_.useMemo(()=>e.Children.toArray(l),[l]),[V,y]=e.useState(n);e.useEffect(()=>{s||y(n)},[n,s]);const c=s?o?.length>0?g(n,o):n:V,p=_.useMemo(()=>!s||!o?null:n.find(t=>m(t)===o)||null,[o,n,s]),{highlightedIndex:w,getMenuProps:x,getInputProps:q,getItemProps:S,isOpen:I}=k({items:c,selectedItem:p,inputValue:o,onInputValueChange({inputValue:t}){s||y(t?.length>0?g(n,t):n),u(t||"")},onSelectedItemChange({selectedItem:t}){t&&r(t.props.value)},itemToString(t){return e.isValidElement(t)?m(t):""}}),{renderLayer:O,triggerProps:L,layerProps:v,triggerBounds:P}=W({isOpen:I,overflowContainer:!0,auto:!0,snap:!0,placement:"bottom-start",possiblePlacements:["top-start","bottom-start"],preferY:"bottom",triggerOffset:2,container:B});return e.createElement("div",{className:"nds-tableAutocomplete"},e.createElement("div",L,e.createElement(D,i({label:a,placeholder:h?void 0:E,isDisabled:h,hasError:N},q({"aria-labelledby":void 0})))),I&&O(e.createElement("div",i({className:T(["nds-tableAutocomplete-dropdown","rounded--all"])},v,{style:{...v.style,width:P?.width||"max-content"}}),e.createElement("ul",i({className:"nds-tableAutocomplete-menu list--reset rounded--all"},x()),c.length===0&&!p&&e.createElement("li",{className:"nds-tableAutocomplete-item padding--x--s padding--y--xs",role:"status","aria-live":"polite"},"No results found"),c.map((t,A)=>e.createElement("li",i({className:T(["nds-tableAutocomplete-item","padding--x--s padding--y--xs",{"nds-tableAutocomplete-item--highlighted":w===A}]),key:t?.props.value},S({item:t,index:A})),e.createElement(d,null,e.createElement(d.Item,null,t),p&&p.props.value===t.props.value&&e.createElement(d.Item,{as:"span",shrink:!0},e.createElement("span",{className:"narmi-icon-check fontSize--l fontWeight--bold"})))))),b&&e.createElement("div",{className:"nds-tableAutocomplete-footer padding--x--s padding--y--xs border--top"},b))))};f.Item=C;try{m.displayName="itemToString",m.__docgenInfo={description:"",displayName:"itemToString",props:{}}}catch{}try{f.displayName="TableAutocomplete",f.__docgenInfo={description:`A simplified Combobox component for table inline editing.
Useful for inline editing of table items where we want to
provide an autocomplete of possible values with a native input.

Allows single selection only.`,displayName:"TableAutocomplete",props:{label:{defaultValue:null,description:"Input label for accessibility",name:"label",required:!0,type:{name:"string"}},children:{defaultValue:null,description:`TableAutocomplete.Item children
Children must be an array of TableAutocomplete.Item components.`,name:"children",required:!0,type:{name:"TableAutocompleteItem[]"}},onChange:{defaultValue:{value:"() => {}"},description:"Selection change event callback - called with value of selected item",name:"onChange",required:!1,type:{name:"(value: string) => void"}},onInputChange:{defaultValue:{value:"() => {}"},description:"Input change event callback",name:"onInputChange",required:!1,type:{name:"(value: string) => void"}},filterItemsByInput:{defaultValue:{value:`(
  items: TableAutocompleteItem[],
  inputValue: string,
) =>
  items.filter((item) =>
    itemToString(item).toLowerCase().startsWith(inputValue.toLowerCase()),
  )`},description:"Optional custom filter function for items. Signature: (items, inputValue) => filteredItems[]",name:"filterItemsByInput",required:!1,type:{name:"(items: TableAutocompleteItem[], inputValue: string) => TableAutocompleteItem[]"}},footerContent:{defaultValue:null,description:"Optional pinned footer content; use for action buttons",name:"footerContent",required:!1,type:{name:"ReactNode"}},placeholder:{defaultValue:null,description:"Input placeholder text",name:"placeholder",required:!1,type:{name:"string"}},isDisabled:{defaultValue:{value:"false"},description:"Whether the input is disabled",name:"isDisabled",required:!1,type:{name:"boolean"}},inputValue:{defaultValue:null,description:"Optional controlled input value",name:"inputValue",required:!1,type:{name:"string"}},hasError:{defaultValue:{value:"false"},description:"Whether the input has an error",name:"hasError",required:!1,type:{name:"boolean"}}}}}catch{}export{f as T};
