import{r as h,e as a}from"./iframe-BBMgbPSV.js";import{P as i}from"./index-Sb7vjpsS.js";import{c as B}from"./index-RvS1aOr8.js";import{u as K,c as W}from"./dom-D1QlgNSL.js";import{c as z,d as F,e as G,f as Y,g as J,h as Q,b as X,$ as Z,a as ee}from"./Dialog-owgeHSys.js";import{k as te,l as D,m as q}from"./context-Bh0lWQ04.js";import{$ as ne}from"./useFocusRing-BcU126ks.js";import{i as M}from"./selection-CAkQuomx.js";import{R as N}from"./index-DD9-6ILY.js";function ae(e,t){let{elementType:n="button",isDisabled:r,onPress:o,onPressStart:s,onPressEnd:l,onPressUp:I,onPressChange:m,preventFocusOnPress:v,allowFocusWhenDisabled:u,onClick:c,href:P,target:g,rel:$,type:p="button"}=e,d;n==="button"?d={type:p,disabled:r,form:e.form,formAction:e.formAction,formEncType:e.formEncType,formMethod:e.formMethod,formNoValidate:e.formNoValidate,formTarget:e.formTarget,name:e.name,value:e.value}:d={role:"button",href:n==="a"&&!r?P:void 0,target:n==="a"?g:void 0,type:n==="input"?p:void 0,disabled:n==="input"?r:void 0,"aria-disabled":!r||n==="input"?void 0:r,rel:n==="a"?$:void 0};let{pressProps:E,isPressed:O}=z({onPressStart:s,onPressEnd:l,onPressChange:m,onPress:o,onPressUp:I,onClick:c,isDisabled:r,preventFocusOnPress:v,ref:t}),{focusableProps:y}=te(e,t);u&&(y.tabIndex=r?-1:y.tabIndex);let A=D(y,E,F(e,{labelable:!0}));return{isPressed:O,buttonProps:D(d,A,{"aria-haspopup":e["aria-haspopup"],"aria-expanded":e["aria-expanded"],"aria-controls":e["aria-controls"],"aria-pressed":e["aria-pressed"],"aria-current":e["aria-current"]})}}const U=7e3;let b=null;function V(e,t="assertive",n=U){b?b.announce(e,t,n):(b=new re,(typeof IS_REACT_ACT_ENVIRONMENT=="boolean"?IS_REACT_ACT_ENVIRONMENT:typeof jest<"u")?b.announce(e,t,n):setTimeout(()=>{b?.isAttached()&&b?.announce(e,t,n)},100))}class re{isAttached(){var t;return(t=this.node)===null||t===void 0?void 0:t.isConnected}createLog(t){let n=document.createElement("div");return n.setAttribute("role","log"),n.setAttribute("aria-live",t),n.setAttribute("aria-relevant","additions"),n}destroy(){this.node&&(document.body.removeChild(this.node),this.node=null)}announce(t,n="assertive",r=U){var o,s;if(!this.node)return;let l=document.createElement("div");typeof t=="object"?(l.setAttribute("role","img"),l.setAttribute("aria-labelledby",t["aria-labelledby"])):l.textContent=t,n==="assertive"?(o=this.assertiveLog)===null||o===void 0||o.appendChild(l):(s=this.politeLog)===null||s===void 0||s.appendChild(l),t!==""&&setTimeout(()=>{l.remove()},r)}clear(t){this.node&&((!t||t==="assertive")&&this.assertiveLog&&(this.assertiveLog.innerHTML=""),(!t||t==="polite")&&this.politeLog&&(this.politeLog.innerHTML=""))}constructor(){this.node=null,this.assertiveLog=null,this.politeLog=null,typeof document<"u"&&(this.node=document.createElement("div"),this.node.dataset.liveAnnouncer="true",Object.assign(this.node.style,{border:0,clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"}),this.assertiveLog=this.createLog("assertive"),this.node.appendChild(this.assertiveLog),this.politeLog=this.createLog("polite"),this.node.appendChild(this.politeLog),document.body.prepend(this.node))}}const oe=h.createContext(null),ie=h.createContext({}),se=G(function(t,n){[t,n]=Y(t,n,ie),t=de(t);let r=t,{isPending:o}=r,{buttonProps:s,isPressed:l}=ae(t,n),{focusProps:I,isFocused:m,isFocusVisible:v}=ne(t),{hoverProps:u,isHovered:c}=J({...t,isDisabled:t.isDisabled||o}),P={isHovered:c,isPressed:(r.isPressed||l)&&!o,isFocused:m,isFocusVisible:v,isDisabled:t.isDisabled||!1,isPending:o??!1},g=Q({...t,values:P,defaultClassName:"react-aria-Button"}),$=q(s.id),p=q(),d=s["aria-labelledby"];o&&(d?d=`${d} ${p}`:s["aria-label"]&&(d=`${$} ${p}`));let E=h.useRef(o);h.useEffect(()=>{let y={"aria-labelledby":d||$};(!E.current&&m&&o||E.current&&m&&!o)&&V(y,"assertive"),E.current=o},[o,m,d,$]);let O=F(t,{global:!0});return delete O.onClick,a.createElement("button",{...D(O,g,s,I,u),type:s.type==="submit"&&o?"button":s.type,id:$,ref:n,"aria-labelledby":d,slot:t.slot||void 0,"aria-disabled":o?"true":s["aria-disabled"],"data-disabled":t.isDisabled||void 0,"data-pressed":P.isPressed||void 0,"data-hovered":c||void 0,"data-focused":m||void 0,"data-pending":o||void 0,"data-focus-visible":v||void 0},a.createElement(oe.Provider,{value:{id:p}},g.children))});function de(e){return e.isPending&&(e.onPress=void 0,e.onPressStart=void 0,e.onPressEnd=void 0,e.onPressChange=void 0,e.onPressUp=void 0,e.onKeyDown=void 0,e.onKeyUp=void 0,e.onClick=void 0,e.href=void 0),e}const R=M.icons.map(e=>e.properties.name),_=({label:e,startIcon:t,endIcon:n,onSelect:r})=>a.createElement(a.Fragment,null);_.propTypes={label:i.string.isRequired,onSelect:i.func.isRequired,startIcon:i.oneOf(R),endIcon:i.oneOf(R)};_.displayName="MenuButton.Item";_.__docgenInfo={description:"",methods:[],displayName:"MenuButton.Item",props:{label:{description:"Display label for menu item",type:{name:"string"},required:!0},onSelect:{description:"Selection handler",type:{name:"func"},required:!0},startIcon:{description:"Optional start icon for menu item",type:{name:"enum",computed:!0,value:"VALID_ICON_NAMES"},required:!1},endIcon:{description:"Optional end icon for menu item",type:{name:"enum",computed:!0,value:"VALID_ICON_NAMES"},required:!1}}};const k=M.icons.map(e=>e.properties.name),w=({id:e,label:t,startIcon:n,endIcon:r,roundedTop:o,roundedBottom:s,className:l})=>a.createElement(X,{key:e,id:e,value:e,startIcon:n,endIcon:r,className:({isSelected:I,isFocused:m,isDisabled:v})=>B(["nds-menubutton-item","padding--x--s padding--y--xs",{"nds-menubutton-item--highlighted":I||m,"nds-menubutton-item--disabled":v,"rounded--top":o,"rounded--bottom":s,[l]:l}])},a.createElement(N,{gapSize:"s"},n&&a.createElement(N.Item,{shrink:!0},a.createElement("span",{className:`narmi-icon-${n}`})),a.createElement(N.Item,null,t),r&&a.createElement(N.Item,{shrink:!0},a.createElement("span",{className:`narmi-icon-${r}`}))));w.propTypes={id:i.string.isRequired,label:i.string.isRequired,startIcon:i.oneOf(k),endIcon:i.oneOf(k),roundedTop:i.bool,roundedBottom:i.bool,className:i.string};w.__docgenInfo={description:"",methods:[],displayName:"AriaMenuItem",props:{id:{description:"Unique ID for the menu item",type:{name:"string"},required:!0},label:{description:"Display label for menu item",type:{name:"string"},required:!0},startIcon:{description:"Optional start icon for the menu items",type:{name:"enum",computed:!0,value:"VALID_ICON_NAMES"},required:!1},endIcon:{description:"Optional end icon for the menu items",type:{name:"enum",computed:!0,value:"VALID_ICON_NAMES"},required:!1},roundedTop:{description:"If true, the item will have a rounded top border",type:{name:"bool"},required:!1},roundedBottom:{description:"If true, the item will have a rounded bottom border",type:{name:"bool"},required:!1},className:{description:"Optional className parameter passed to react-aria component",type:{name:"string"},required:!1}}};function L(){return L=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},L.apply(null,arguments)}const le=M.icons.map(e=>e.properties.name),x=e=>e.replace(/\s+/g,"-").toLowerCase(),S=({label:e="Menu",testId:t,trigger:n,renderTrigger:r,triggerIcon:o="more-vertical",showDropdownIndicator:s=!1,side:l="bottom",alignment:I="start",offset:m=2,children:v,footerItem:u})=>{const[c,P]=h.useState(!1),g=a.Children.toArray(v),$=u?g.concat(u):g,p=h.useRef(c),d=h.useCallback(()=>{P(!1),p.current=!1},[p]),{renderLayer:E,triggerProps:O,layerProps:y}=K({isOpen:c,auto:!0,onOutsideClick:d,placement:`${l}-${I}`,container:W,triggerOffset:m}),A=({key:f})=>{f==="Escape"&&c&&d()};h.useEffect(()=>(window.addEventListener("keydown",A),()=>{window.removeEventListener("keydown",A)}),[A]);const H=f=>{$.find(C=>x(C.props.label)===f).props.onSelect(),d()},j=h.useCallback(()=>{p.current?d():p.current=!0},[d]);return a.createElement(Z,{isOpen:c,onOpenChange:f=>{f&&P(!0)},"data-testid":t,className:"nds-menubutton"},a.createElement(se,L({"aria-label":e,className:"button--reset nds-menubutton-ariaButton"},O,{onClick:j}),typeof r=="function"?r(c):a.createElement("div",{className:B(["nds-menubutton-trigger",{"nds-menubutton-trigger--useCssHover":!n,"nds-menubutton-trigger--hovered":!n&&c}])},a.createElement(N,{gapSize:"xxs"},a.createElement(N.Item,null,n||a.createElement("span",{className:`narmi-icon-${o}`})),s&&a.createElement(N.Item,{shrink:!0},c?a.createElement("span",{className:"narmi-icon-chevron-up"}):a.createElement("span",{className:"narmi-icon-chevron-down"}))))),c&&E(a.createElement("div",L({className:"nds-menubutton-popover"},y),a.createElement(ee,{onAction:H,className:"nds-menubutton-menu rounded--all elevation--high",autoFocus:!0},g.map((f,T)=>{const C=x(f.props.label);return a.createElement(w,{key:C,id:C,value:C,label:f.props.label,startIcon:f.props.startIcon,endIcon:f.props.endIcon,roundedTop:T===0,roundedBottom:T===g.length-1&&!u})}),u&&a.createElement(w,{className:"padding--y--s padding--x--s border--top",id:x(u.props.label),value:x(u.props.label),label:u.props.label,startIcon:u.props.startIcon,endIcon:u.props.endIcon,roundedBottom:!0},u)))))};S.propTypes={label:i.string.isRequired,testId:i.string,triggerIcon:i.oneOf(le),trigger:i.node,renderTrigger:i.func,children:i.arrayOf(i.node),showDropdownIndicator:i.bool,side:i.oneOf(["top","right","bottom","left"]),alignment:i.oneOf(["start","center","end"]),offset:i.number,footerItem:i.node};S.Item=_;S.__docgenInfo={description:`Keyboard navigable popover menu following the
[WIA-ARIA "MenuButton" pattern](https://www.w3.org/TR/wai-aria-practices-1.2/#menubutton).`,methods:[{name:"Item",docblock:null,modifiers:["static"],params:[{name:"{ label, startIcon, endIcon, onSelect }",optional:!1,type:null}],returns:null}],displayName:"MenuButton",props:{label:{defaultValue:{value:'"Menu"',computed:!1},description:'Accessible label for the menu trigger (e.g. "Transaction Actions")',type:{name:"string"},required:!1},triggerIcon:{defaultValue:{value:'"more-vertical"',computed:!1},description:"Name of NDS icon to use as a trigger",type:{name:"enum",computed:!0,value:"VALID_ICON_NAMES"},required:!1},showDropdownIndicator:{defaultValue:{value:"false",computed:!1},description:`If true, a caret indicator is rendered as the end icon
within the trigger. The icon will change direction when
the expanded state of the menulist changes.`,type:{name:"bool"},required:!1},side:{defaultValue:{value:'"bottom"',computed:!1},description:"Sets preferred side of the trigger the tooltip should appear",type:{name:"enum",value:[{value:'"top"',computed:!1},{value:'"right"',computed:!1},{value:'"bottom"',computed:!1},{value:'"left"',computed:!1}]},required:!1},alignment:{defaultValue:{value:'"start"',computed:!1},description:"Sets preferred alignment of the tooltip relative to the trigger",type:{name:"enum",value:[{value:'"start"',computed:!1},{value:'"center"',computed:!1},{value:'"end"',computed:!1}]},required:!1},offset:{defaultValue:{value:"2",computed:!1},description:"Distance of Popover from trigger element in number of pixels",type:{name:"number"},required:!1},testId:{description:"Optional value for `data-testid` attribute",type:{name:"string"},required:!1},trigger:{description:"⚠️ DEPRECATED - will be removed in a future release.\nUse `renderTrigger` instead.",type:{name:"node"},required:!1},renderTrigger:{description:"Render function for rendering a custom trigger element.\nCalled with `(isOpen)`, the open state of the menu.",type:{name:"func"},required:!1},children:{description:"MenuButton.Item children",type:{name:"arrayOf",value:{name:"node"}},required:!1},footerItem:{description:"Optional footer content to render below the menu items",type:{name:"node"},required:!1}}};export{S as M,le as V};
