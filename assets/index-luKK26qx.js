import{r as h,e as a}from"./iframe-Ci3LgRk2.js";import{c as k}from"./index-RvS1aOr8.js";import{u as j,c as K}from"./dom-qTT1fONq.js";import{c as W,d as R,e as z,f as G,g as Y,h as J,b as Q,$ as X,a as Z}from"./Dialog-wYoeuuzW.js";import{k as ee,l as T,m as S}from"./context-CmnI7aID.js";import{$ as te}from"./useFocusRing-UUx6dLs3.js";import{i as M}from"./selection-CAkQuomx.js";import{P as x}from"./index-Diq6Q1ge.js";import{R as E}from"./index-xE5G1eq7.js";function ne(e,t){let{elementType:n="button",isDisabled:r,onPress:o,onPressStart:i,onPressEnd:d,onPressUp:y,onPressChange:c,preventFocusOnPress:g,allowFocusWhenDisabled:l,onClick:u,href:I,target:b,rel:v,type:m="button"}=e,s;n==="button"?s={type:m,disabled:r,form:e.form,formAction:e.formAction,formEncType:e.formEncType,formMethod:e.formMethod,formNoValidate:e.formNoValidate,formTarget:e.formTarget,name:e.name,value:e.value}:s={role:"button",href:n==="a"&&!r?I:void 0,target:n==="a"?b:void 0,type:n==="input"?m:void 0,disabled:n==="input"?r:void 0,"aria-disabled":!r||n==="input"?void 0:r,rel:n==="a"?v:void 0};let{pressProps:P,isPressed:N}=W({onPressStart:i,onPressEnd:d,onPressChange:c,onPress:o,onPressUp:y,onClick:u,isDisabled:r,preventFocusOnPress:g,ref:t}),{focusableProps:$}=ee(e,t);l&&($.tabIndex=r?-1:$.tabIndex);let C=T($,P,R(e,{labelable:!0}));return{isPressed:N,buttonProps:T(s,C,{"aria-haspopup":e["aria-haspopup"],"aria-expanded":e["aria-expanded"],"aria-controls":e["aria-controls"],"aria-pressed":e["aria-pressed"],"aria-current":e["aria-current"]})}}const B=7e3;let f=null;function q(e,t="assertive",n=B){f?f.announce(e,t,n):(f=new ae,(typeof IS_REACT_ACT_ENVIRONMENT=="boolean"?IS_REACT_ACT_ENVIRONMENT:typeof jest<"u")?f.announce(e,t,n):setTimeout(()=>{f?.isAttached()&&f?.announce(e,t,n)},100))}class ae{isAttached(){var t;return(t=this.node)===null||t===void 0?void 0:t.isConnected}createLog(t){let n=document.createElement("div");return n.setAttribute("role","log"),n.setAttribute("aria-live",t),n.setAttribute("aria-relevant","additions"),n}destroy(){this.node&&(document.body.removeChild(this.node),this.node=null)}announce(t,n="assertive",r=B){var o,i;if(!this.node)return;let d=document.createElement("div");typeof t=="object"?(d.setAttribute("role","img"),d.setAttribute("aria-labelledby",t["aria-labelledby"])):d.textContent=t,n==="assertive"?(o=this.assertiveLog)===null||o===void 0||o.appendChild(d):(i=this.politeLog)===null||i===void 0||i.appendChild(d),t!==""&&setTimeout(()=>{d.remove()},r)}clear(t){this.node&&((!t||t==="assertive")&&this.assertiveLog&&(this.assertiveLog.innerHTML=""),(!t||t==="polite")&&this.politeLog&&(this.politeLog.innerHTML=""))}constructor(){this.node=null,this.assertiveLog=null,this.politeLog=null,typeof document<"u"&&(this.node=document.createElement("div"),this.node.dataset.liveAnnouncer="true",Object.assign(this.node.style,{border:0,clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"}),this.assertiveLog=this.createLog("assertive"),this.node.appendChild(this.assertiveLog),this.politeLog=this.createLog("polite"),this.node.appendChild(this.politeLog),document.body.prepend(this.node))}}const re=h.createContext(null),oe=h.createContext({}),ie=z(function(t,n){[t,n]=G(t,n,oe),t=se(t);let r=t,{isPending:o}=r,{buttonProps:i,isPressed:d}=ne(t,n),{focusProps:y,isFocused:c,isFocusVisible:g}=te(t),{hoverProps:l,isHovered:u}=Y({...t,isDisabled:t.isDisabled||o}),I={isHovered:u,isPressed:(r.isPressed||d)&&!o,isFocused:c,isFocusVisible:g,isDisabled:t.isDisabled||!1,isPending:o??!1},b=J({...t,values:I,defaultClassName:"react-aria-Button"}),v=S(i.id),m=S(),s=i["aria-labelledby"];o&&(s?s=`${s} ${m}`:i["aria-label"]&&(s=`${v} ${m}`));let P=h.useRef(o);h.useEffect(()=>{let $={"aria-labelledby":s||v};(!P.current&&c&&o||P.current&&c&&!o)&&q($,"assertive"),P.current=o},[o,c,s,v]);let N=R(t,{global:!0});return delete N.onClick,a.createElement("button",{...T(N,b,i,y,l),type:i.type==="submit"&&o?"button":i.type,id:v,ref:n,"aria-labelledby":s,slot:t.slot||void 0,"aria-disabled":o?"true":i["aria-disabled"],"data-disabled":t.isDisabled||void 0,"data-pressed":I.isPressed||void 0,"data-hovered":u||void 0,"data-focused":c||void 0,"data-pending":o||void 0,"data-focus-visible":g||void 0},a.createElement(re.Provider,{value:{id:m}},b.children))});function se(e){return e.isPending&&(e.onPress=void 0,e.onPressStart=void 0,e.onPressEnd=void 0,e.onPressChange=void 0,e.onPressUp=void 0,e.onKeyDown=void 0,e.onKeyUp=void 0,e.onClick=void 0,e.href=void 0),e}const V=M.icons.map(e=>e.properties.name),w=({label:e,startIcon:t,endIcon:n,onSelect:r})=>a.createElement(a.Fragment,null);w.propTypes={label:x.string.isRequired,onSelect:x.func.isRequired,startIcon:x.oneOf(V),endIcon:x.oneOf(V)};w.displayName="MenuButton.Item";w.__docgenInfo={description:"",methods:[],displayName:"MenuButton.Item",props:{label:{description:"Display label for menu item",type:{name:"string"},required:!0},onSelect:{description:"Selection handler",type:{name:"func"},required:!0},startIcon:{description:"Optional start icon for menu item",type:{name:"enum",computed:!0,value:"VALID_ICON_NAMES"},required:!1},endIcon:{description:"Optional end icon for menu item",type:{name:"enum",computed:!0,value:"VALID_ICON_NAMES"},required:!1}}};M.icons.map(e=>e.properties.name);const D=({id:e,label:t,startIcon:n,endIcon:r,roundedTop:o,roundedBottom:i,className:d})=>a.createElement(Q,{key:e,id:e,value:e,startIcon:n,endIcon:r,className:({isSelected:y,isFocused:c,isDisabled:g})=>k(["nds-menubutton-item","padding--x--s padding--y--xs",{"nds-menubutton-item--highlighted":y||c,"nds-menubutton-item--disabled":g,"rounded--top":o,"rounded--bottom":i,[d]:d}])},a.createElement(E,{gapSize:"s"},n&&a.createElement(E.Item,{shrink:!0},a.createElement("span",{className:`narmi-icon-${n}`})),a.createElement(E.Item,null,t),r&&a.createElement(E.Item,{shrink:!0},a.createElement("span",{className:`narmi-icon-${r}`}))));D.__docgenInfo={description:"",methods:[],displayName:"AriaMenuItem",props:{id:{description:"Unique ID for the menu item",type:{name:"string"},required:!0},label:{description:"Display label for menu item",type:{name:"string"},required:!0},startIcon:{description:"Optional start icon for the menu items",type:{name:"enum",computed:!0,value:"VALID_ICON_NAMES"},required:!1},endIcon:{description:"Optional end icon for the menu items",type:{name:"enum",computed:!0,value:"VALID_ICON_NAMES"},required:!1},roundedTop:{description:"If true, the item will have a rounded top border",type:{name:"bool"},required:!1},roundedBottom:{description:"If true, the item will have a rounded bottom border",type:{name:"bool"},required:!1},className:{description:"Optional className parameter passed to react-aria component",type:{name:"string"},required:!1}}};function L(){return L=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},L.apply(null,arguments)}const ge=M.icons.map(e=>e.properties.name),O=e=>e.replace(/\s+/g,"-").toLowerCase(),F=({label:e="Menu",testId:t,trigger:n,renderTrigger:r,triggerIcon:o="more-vertical",showDropdownIndicator:i=!1,side:d="bottom",alignment:y="start",offset:c=2,children:g,footerItem:l})=>{const[u,I]=h.useState(!1),b=a.Children.toArray(g),v=l?b.concat(l):b,m=h.useRef(u),s=h.useCallback(()=>{I(!1),m.current=!1},[m]),{renderLayer:P,triggerProps:N,layerProps:$}=j({isOpen:u,auto:!0,onOutsideClick:s,placement:`${d}-${y}`,container:K,triggerOffset:c}),C=({key:p})=>{p==="Escape"&&u&&s()};h.useEffect(()=>(window.addEventListener("keydown",C),()=>{window.removeEventListener("keydown",C)}),[C]);const U=p=>{v.find(A=>O(A.props.label)===p).props.onSelect(),s()},H=h.useCallback(()=>{m.current?s():m.current=!0},[s]);return a.createElement(X,{isOpen:u,onOpenChange:p=>{p&&I(!0)},"data-testid":t,className:"nds-menubutton"},a.createElement(ie,L({"aria-label":e,className:"button--reset nds-menubutton-ariaButton"},N,{onClick:H}),typeof r=="function"?r(u):a.createElement("div",{className:k(["nds-menubutton-trigger",{"nds-menubutton-trigger--useCssHover":!n,"nds-menubutton-trigger--hovered":!n&&u}])},a.createElement(E,{gapSize:"xxs"},a.createElement(E.Item,null,n||a.createElement("span",{className:`narmi-icon-${o}`})),i&&a.createElement(E.Item,{shrink:!0},u?a.createElement("span",{className:"narmi-icon-chevron-up"}):a.createElement("span",{className:"narmi-icon-chevron-down"}))))),u&&P(a.createElement("div",L({className:"nds-menubutton-popover"},$),a.createElement(Z,{onAction:U,className:"nds-menubutton-menu rounded--all elevation--high",autoFocus:!0},b.map((p,_)=>{const A=O(p.props.label);return a.createElement(D,{key:A,id:A,value:A,label:p.props.label,startIcon:p.props.startIcon,endIcon:p.props.endIcon,roundedTop:_===0,roundedBottom:_===b.length-1&&!l})}),l&&a.createElement(D,{className:"padding--y--s padding--x--s border--top",id:O(l.props.label),value:O(l.props.label),label:l.props.label,startIcon:l.props.startIcon,endIcon:l.props.endIcon,roundedBottom:!0},l)))))};F.Item=w;F.__docgenInfo={description:`Keyboard navigable popover menu following the
[WIA-ARIA "MenuButton" pattern](https://www.w3.org/TR/wai-aria-practices-1.2/#menubutton).`,methods:[{name:"Item",docblock:null,modifiers:["static"],params:[{name:"{ label, startIcon, endIcon, onSelect }",optional:!1,type:null}],returns:null}],displayName:"MenuButton",props:{label:{defaultValue:{value:'"Menu"',computed:!1},description:'Accessible label for the menu trigger (e.g. "Transaction Actions")',type:{name:"string"},required:!1},triggerIcon:{defaultValue:{value:'"more-vertical"',computed:!1},description:"Name of NDS icon to use as a trigger",type:{name:"enum",computed:!0,value:"VALID_ICON_NAMES"},required:!1},showDropdownIndicator:{defaultValue:{value:"false",computed:!1},description:`If true, a caret indicator is rendered as the end icon
within the trigger. The icon will change direction when
the expanded state of the menulist changes.`,type:{name:"bool"},required:!1},side:{defaultValue:{value:'"bottom"',computed:!1},description:"Sets preferred side of the trigger the tooltip should appear",type:{name:"enum",value:[{value:'"top"',computed:!1},{value:'"right"',computed:!1},{value:'"bottom"',computed:!1},{value:'"left"',computed:!1}]},required:!1},alignment:{defaultValue:{value:'"start"',computed:!1},description:"Sets preferred alignment of the tooltip relative to the trigger",type:{name:"enum",value:[{value:'"start"',computed:!1},{value:'"center"',computed:!1},{value:'"end"',computed:!1}]},required:!1},offset:{defaultValue:{value:"2",computed:!1},description:"Distance of Popover from trigger element in number of pixels",type:{name:"number"},required:!1},testId:{description:"Optional value for `data-testid` attribute",type:{name:"string"},required:!1},trigger:{description:"⚠️ DEPRECATED - will be removed in a future release.\nUse `renderTrigger` instead.",type:{name:"node"},required:!1},renderTrigger:{description:"Render function for rendering a custom trigger element.\nCalled with `(isOpen)`, the open state of the menu.",type:{name:"func"},required:!1},children:{description:"MenuButton.Item children",type:{name:"arrayOf",value:{name:"node"}},required:!1},footerItem:{description:"Optional footer content to render below the menu items",type:{name:"node"},required:!1}}};export{F as M,ge as V};
