import{$ as x,a as W,b as T,c as v,d as C,e as m,f as V,g as P,h as w,i as B,j as D}from"./context-BMXxYk_a.js";import{r as i}from"./iframe-DOQXiNbA.js";function E(b){let{isDisabled:$,onBlurWithin:n,onFocusWithin:c,onFocusWithinChange:t}=b,s=i.useRef({isFocusWithin:!1}),{addGlobalListener:f,removeAllGlobalListeners:l}=x(),r=i.useCallback(e=>{e.currentTarget.contains(e.target)&&s.current.isFocusWithin&&!e.currentTarget.contains(e.relatedTarget)&&(s.current.isFocusWithin=!1,l(),n&&n(e),t&&t(!1))},[n,t,s,l]),o=W(r),d=i.useCallback(e=>{if(!e.currentTarget.contains(e.target))return;const u=T(e.target),a=v(u);if(!s.current.isFocusWithin&&a===C(e.nativeEvent)){c&&c(e),t&&t(!0),s.current.isFocusWithin=!0,o(e);let F=e.currentTarget;f(u,"focus",p=>{if(s.current.isFocusWithin&&!m(F,p.target)){let h=new u.defaultView.FocusEvent("blur",{relatedTarget:p.target});V(h,F);let g=P(h);r(g)}},{capture:!0})}},[c,t,o,f,r]);return $?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:d,onBlur:r}}}function G(b={}){let{autoFocus:$=!1,isTextInput:n,within:c}=b,t=i.useRef({isFocused:!1,isFocusVisible:$||w()}),[s,f]=i.useState(!1),[l,r]=i.useState(()=>t.current.isFocused&&t.current.isFocusVisible),o=i.useCallback(()=>r(t.current.isFocused&&t.current.isFocusVisible),[]),d=i.useCallback(a=>{t.current.isFocused=a,f(a),o()},[o]);B(a=>{t.current.isFocusVisible=a,o()},[],{isTextInput:n});let{focusProps:e}=D({isDisabled:c,onFocusChange:d}),{focusWithinProps:u}=E({isDisabled:!c,onFocusWithinChange:d});return{isFocused:s,isFocusVisible:l,focusProps:c?u:e}}export{G as $,E as a};
